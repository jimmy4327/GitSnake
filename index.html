<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GitSnake üêç</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #0d1117;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      font-family: 'Segoe UI', sans-serif;
      color: #c9d1d9;
    }
    h1 {
      font-size: 2rem;
      margin-bottom: 8px;
      color: #58a6ff;
      letter-spacing: 2px;
    }
    #scoreboard {
      display: flex;
      gap: 40px;
      margin-bottom: 12px;
      font-size: 1rem;
      color: #8b949e;
    }
    #scoreboard span { color: #58a6ff; font-weight: bold; }
    #gameCanvas {
      border: 2px solid #30363d;
      border-radius: 8px;
      background: #161b22;
      display: block;
    }
    #message {
      margin-top: 14px;
      font-size: 1rem;
      color: #8b949e;
      height: 24px;
    }
    #message strong { color: #3fb950; }
    #startBtn {
      margin-top: 12px;
      padding: 10px 28px;
      background: #238636;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.2s;
    }
    #startBtn:hover { background: #2ea043; }
  </style>
</head>
<body>
  <h1>üêç GitSnake</h1>
  <div id="scoreboard">
    Score: <span id="scoreVal">0</span>
    &nbsp;|&nbsp; High Score: <span id="highVal">0</span>
    &nbsp;|&nbsp; Speed: <span id="speedVal">1</span>
  </div>
  <canvas id="gameCanvas" width="480" height="480"></canvas>
  <div id="message">Press <strong>Space</strong> or click Start to play!</div>
  <button id="startBtn">Start Game</button>

  <script>
    const COLS = 20, ROWS = 20;
    const CELL = 480 / COLS;
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const scoreEl = document.getElementById('scoreVal');
    const highEl = document.getElementById('highVal');
    const speedEl = document.getElementById('speedVal');
    const msgEl = document.getElementById('message');
    const startBtn = document.getElementById('startBtn');

    const octocatImg = new Image();
    octocatImg.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(`
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32">
  <circle cx="16" cy="16" r="16" fill="#24292e"/>
  <path fill="#fff" d="M16 5.6C10.26 5.6 5.6 10.26 5.6 16c0 4.6 2.98 8.51 7.11 9.89.52.1.71-.23.71-.5v-1.74c-2.89.63-3.5-1.39-3.5-1.39-.47-1.2-1.15-1.52-1.15-1.52-.94-.64.07-.63.07-.63 1.04.07 1.59 1.07 1.59 1.07.93 1.59 2.43 1.13 3.02.86.09-.67.36-1.13.66-1.39-2.31-.26-4.74-1.15-4.74-5.13 0-1.13.4-2.06 1.07-2.78-.11-.26-.46-1.32.1-2.74 0 0 .87-.28 2.86 1.07a9.95 9.95 0 012.6-.35c.88 0 1.77.12 2.6.35 1.99-1.35 2.86-1.07 2.86-1.07.56 1.42.21 2.48.1 2.74.67.72 1.07 1.65 1.07 2.78 0 3.99-2.44 4.87-4.76 5.12.37.32.71.96.71 1.94v2.87c0 .28.19.6.72.5A10.42 10.42 0 0026.4 16c0-5.74-4.66-10.4-10.4-10.4z"/>
</svg>`)}`;

    let snake, dir, nextDir, apple, score, highScore = 0, gameLoop, speed, level, running = false;
    const BASE_INTERVAL = 140;
    const SPEED_DELTA = 4;

    function randCell() {
      return { x: Math.floor(Math.random() * COLS), y: Math.floor(Math.random() * ROWS) };
    }

    function placeApple() {
      let pos;
      do { pos = randCell(); }
      while (snake.some(s => s.x === pos.x && s.y === pos.y));
      apple = pos;
    }

    function init() {
      snake = [{ x: 10, y: 10 }, { x: 9, y: 10 }, { x: 8, y: 10 }];
      dir = { x: 1, y: 0 };
      nextDir = { x: 1, y: 0 };
      score = 0; speed = BASE_INTERVAL; level = 1;
      scoreEl.textContent = 0; speedEl.textContent = 1;
      msgEl.innerHTML = '';
      placeApple();
      running = true;
      startBtn.textContent = 'Restart';
      if (gameLoop) clearTimeout(gameLoop);
      tick();
    }

    function tick() {
      if (!running) return;
      dir = nextDir;
      const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };
      if (head.x < 0 || head.x >= COLS || head.y < 0 || head.y >= ROWS) return gameOver();
      if (snake.some(s => s.x === head.x && s.y === head.y)) return gameOver();
      snake.unshift(head);
      if (head.x === apple.x && head.y === apple.y) {
        score++;
        scoreEl.textContent = score;
        if (score > highScore) { highScore = score; highEl.textContent = highScore; }
        speed = Math.max(50, BASE_INTERVAL - score * SPEED_DELTA);
        level = Math.floor(score / 3) + 1;
        speedEl.textContent = level;
        placeApple();
      } else {
        snake.pop();
      }
      draw();
      gameLoop = setTimeout(tick, speed);
    }

    function gameOver() {
      running = false;
      clearTimeout(gameLoop);
      draw();
      msgEl.innerHTML = `üíÄ Game Over! Score: <strong>${score}</strong> ‚Äî Press Space or Restart`;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      ctx.strokeStyle = '#21262d'; ctx.lineWidth = 0.5;
      for (let i = 0; i <= COLS; i++) { ctx.beginPath(); ctx.moveTo(i*CELL,0); ctx.lineTo(i*CELL,canvas.height); ctx.stroke(); }
      for (let j = 0; j <= ROWS; j++) { ctx.beginPath(); ctx.moveTo(0,j*CELL); ctx.lineTo(canvas.width,j*CELL); ctx.stroke(); }
      if (apple) {
        if (octocatImg.complete && octocatImg.naturalWidth > 0) {
          ctx.drawImage(octocatImg, apple.x*CELL+1, apple.y*CELL+1, CELL-2, CELL-2);
        } else {
          ctx.fillStyle = '#ff6b6b';
          ctx.fillRect(apple.x*CELL+2, apple.y*CELL+2, CELL-4, CELL-4);
        }
      }
      if (snake) snake.forEach((seg, i) => {
        const ratio = i / snake.length;
        const g = Math.round(185 - ratio * 80);
        ctx.fillStyle = i === 0 ? '#3fb950' : `rgb(30,${g},60)`;
        const pad = i === 0 ? 1 : 2;
        ctx.beginPath();
        ctx.roundRect(seg.x*CELL+pad, seg.y*CELL+pad, CELL-pad*2, CELL-pad*2, i===0?4:3);
        ctx.fill();
        if (i === 0) {
          ctx.fillStyle = '#0d1117';
          const ex = seg.x*CELL+CELL/2, ey = seg.y*CELL+CELL/2;
          ctx.beginPath(); ctx.arc(ex-3, ey-3, 2, 0, Math.PI*2); ctx.fill();
          ctx.beginPath(); ctx.arc(ex+3, ey-3, 2, 0, Math.PI*2); ctx.fill();
        }
      });
    }

    document.addEventListener('keydown', e => {
      const keys = { ArrowUp:{x:0,y:-1}, ArrowDown:{x:0,y:1}, ArrowLeft:{x:-1,y:0}, ArrowRight:{x:1,y:0}, w:{x:0,y:-1}, s:{x:0,y:1}, a:{x:-1,y:0}, d:{x:1,y:0} };
      if (e.key === ' ') { e.preventDefault(); if (!running) init(); return; }
      const newDir = keys[e.key];
      if (!newDir) return;
      if (newDir.x === -dir.x && newDir.y === -dir.y) return;
      nextDir = newDir;
    });

    startBtn.addEventListener('click', init);
    draw();
  </script>
</body>
</html>